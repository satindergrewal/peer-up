# Home Node Configuration
# This node runs on your home computer behind NAT/CGNAT
# It advertises itself on the DHT and responds to ping-pong requests

identity:
  # Path to the key file for persistent peer identity
  # This file will be created automatically if it doesn't exist
  key_file: "home_node.key"

network:
  # Addresses to listen on for incoming connections
  # Port 9100 is used by default
  # Use ephemeral port (0) for dynamic assignment
  listen_addresses:
    - "/ip4/0.0.0.0/tcp/9100"
    - "/ip4/0.0.0.0/udp/9100/quic-v1"
    - "/ip6/::/tcp/9100"
    - "/ip6/::/udp/9100/quic-v1"

  # Force libp2p to treat this node as private (behind NAT)
  # This is critical for relay reservation to work properly
  # Set to false only if you have a public IP
  force_private_reachability: true

relay:
  # Addresses of relay servers to use for NAT traversal
  # Format: /ip4/<IP>/tcp/<PORT>/p2p/<RELAY_PEER_ID>
  # You MUST update these after deploying your relay server
  addresses:
    - "/ip4/YOUR_VPS_IP/tcp/7777/p2p/YOUR_RELAY_PEER_ID"
    # - "/ip6/YOUR_VPS_IPV6/tcp/7777/p2p/YOUR_RELAY_PEER_ID"

  # How often to renew relay reservations (default: 2 minutes)
  reservation_interval: "2m"

discovery:
  # Rendezvous string for DHT discovery
  # Clients will search for this string to find your home node
  # Change this to create a private namespace
  rendezvous: "my-private-p2p-network"

  # Optional: Custom bootstrap peers for DHT
  # Leave empty to use libp2p default bootstrap peers
  bootstrap_peers: []

security:
  # Path to authorized_keys file (SSH-style)
  # Only peers listed in this file can connect
  authorized_keys_file: "authorized_keys"

  # Enable connection gating (recommended: true)
  # When enabled, only authorized peers can connect
  enable_connection_gating: true

protocols:
  # Ping-pong protocol configuration
  ping_pong:
    enabled: true
    id: "/pingpong/1.0.0"

# Service Exposure (Phase 4+)
# Expose local services through the P2P network
services:
  # SSH service - allow remote SSH access
  ssh:
    enabled: false  # Set to true to enable
    local_address: "localhost:22"

  # HTTP/Web service - expose local web server
  web:
    enabled: false
    local_address: "localhost:80"

  # HTTPS service
  https:
    enabled: false
    local_address: "localhost:443"

  # Plex media server
  plex:
    enabled: false
    local_address: "localhost:32400"

  # SMB/CIFS file sharing
  smb:
    enabled: false
    local_address: "localhost:445"

  # Custom service example
  custom:
    enabled: false
    local_address: "localhost:9999"
    protocol: "/peerup/custom/1.0.0"  # Optional: custom protocol ID

# Name Resolution (Phase 4+)
# Map friendly names to peer IDs
names:
  # Example mappings:
  # laptop: "12D3KooWLCavCP1Pma9NGJQnGDQhgwSjgQgupWprZJH4w1P3HCVL"
  # phone: "12D3KooWPjceQrSwdWXPyLLeABRXmuqt69Rg3sBYUXCUVwbj7QbA"
